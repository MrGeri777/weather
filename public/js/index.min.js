var parsed_dates,days=document.getElementsByClassName("day"),sells=document.getElementsByClassName("sell");function start(){$_GET("city")&&$_GET("region")||(localStorage.city&&localStorage.region||(localStorage.city="San_Francisco",localStorage.region="CA"),location.href="index.html?city="+localStorage.city+"&region="+localStorage.region),document.getElementById("city").innerHTML=$_GET("city"),(t=new Date).setDate(t.getDate()+2);var e=dateFormat(t,"Y-m-d");t.setDate(t.getDate()+6);var t,a=dateFormat(t,"Y-m-d"),n=document.getElementById("picolo");(t=new Date).setDate(t.getDate()+1);var o=dateFormat(t,"Y-m-d");n.value=o,n.setAttribute("min",e),n.setAttribute("max",a);var r=get_api("http://api.wunderground.com/api/c7f652914607e41c/forecast10day/q/"+$_GET("region")+"/"+$_GET("city")+".json");parsed_dates=JSON.parse(r),create_date(0,0),create_date(1,1),create_date(2,7)}function changed_foc(e){for(var t=0;t<days.length;t++)days[t].className="day";days[e].className="day active";for(t=0;t<days.length;t++)sells[t].className="sell";sells[e].className="sell add",localStorage.dayfoc=e}function change_date(e){var t=new Date(e),a=new Date,n=Math.abs(t.getTime()-a.getTime());create_date("2",Math.ceil(n/864e5))}function change_city(e){arr=e.split(":"),localStorage.city=arr[0],localStorage.region=arr[1],location.href="index.html?city="+localStorage.city+"&region="+localStorage.region}function create_date(e,t){var a=null,n=parsed_dates.forecast.simpleforecast.forecastday[t];a=0==e?"day1":1==e?"day2":"changed";var o=n.date.day,r=n.date.month;o<10&&(o="0"+o),r<10&&(r="0"+r),document.getElementById(a).getElementsByClassName("img")[0].setAttribute("src",n.icon_url),document.getElementById(a).getElementsByClassName("date")[0].innerHTML=o+"-"+r+"-"+n.date.year,document.getElementById(a).getElementsByClassName("temp")[0].innerHTML=n.high.celsius+"C",document.getElementById(a).getElementsByClassName("wind")[0].innerHTML=n.maxwind.mph+"mph",document.getElementById(a).getElementsByClassName("humd")[0].innerHTML=n.avehumidity+"mm"}function get_date(e){var t,a=(t=new Date(e)).getDate(),n=t.getMonth()+1;return a<10&&(a="0"+a),n<10&&(n="0"+n),t=a+n}function get_api(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(),200!=t.status?t.status:t.responseText}function $_GET(e){var t=window.location.search;return!!(t=t.match(new RegExp(e+"=([^&=]+)")))&&t[1]}window.onload=function(){start(),changed_foc(localStorage.dayfoc)};